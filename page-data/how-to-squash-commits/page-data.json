{"componentChunkName":"component---src-templates-blog-post-js","path":"/how-to-squash-commits/","result":{"data":{"site":{"siteMetadata":{"title":"scraggo.com"}},"markdownRemark":{"id":"4870de01-b549-5284-aeb5-e4bbef97d053","excerpt":"Previously, I wrote a guide on formatting commit messages. I’ve had the opportunity to work on a codebase that requires squashing commits into a single commit…","html":"<p>Previously, I wrote a <a href=\"/tech/git-commit-format-squash\">guide on formatting commit messages</a>. I’ve had the opportunity to work on a codebase that requires squashing commits into a single commit. This post is a reliable guide to squashing.</p>\n<h2>What does “squashing” do?</h2>\n<p>It allows you to take changes that are spread amongst multiple commits and consolidate them into one.</p>\n<h2>Why should one consider squashing commits?</h2>\n<ul>\n<li>A clean history makes tracking changes to a large codebase across time much easier.</li>\n<li>Many commits are small and unimportant in the grand scheme to keep as standalone commits. Example: “Fix documentation spelling mistake”</li>\n</ul>\n<p>An excellent way to group commits is to prefix each one with a ticket or issue number:</p>\n<p><code class=\"language-text\">[JIRA-535] my commit message</code></p>\n<p>When you look at your codebase, you’ll see clean delineations of which ticket belongs to each commit.</p>\n<p>After the changes are reviewed, before merging, imagine having one ticket-prefixed commit and a finely-pruned commit message:</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">[JIRA-535] Fix that crazy bug:\n\n- break parsing function into smaller functions\n- fix regex error in object file\n- test that crazy bug case</code></pre></div>\n<p>Each commit on master will relate to a ticket:</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">[JIRA-523] Fix that crazy bug:\n[JIRA-535] Put in UI feature:\n[JIRA-514] Get data from API:\n[JIRA-125] Upgrade dependency:\n[JIRA-567] Homepage accessibility:\n...</code></pre></div>\n<p>This organization is worth striving for!</p>\n<h2>How to squash commits</h2>\n<p>To squash multiple commits into one in the branch you’re on, do the following:</p>\n<ul>\n<li>Run <code class=\"language-text\">git log</code> to determine how many commits to squash. Let’s assume 4.</li>\n<li>Run <code class=\"language-text\">git rebase -i HEAD~4</code> (with 4 being the number of commits)</li>\n<li>OR</li>\n<li>Run <code class=\"language-text\">git rebase -i [SHA]</code></li>\n<li>You should see a list of commits, each commit starting with the word “pick”.</li>\n<li>Make sure the first commit says “pick” and change the rest from “pick” to “squash”. This will squash each commit into the previous commit, which will continue until every commit is squashed into the first commit.</li>\n<li>Save and close the editor.</li>\n<li>It will give you the opportunity to change the commit message. What you see is a single message containing all of the commit messages. Edit these as you wish.</li>\n<li>Save and close the editor again.</li>\n<li>Important: If you’ve already pushed commits to origin, and then squash them locally, you will have to force the push to your branch. - <code class=\"language-text\">git push origin branch-name --force</code></li>\n</ul>\n<h3>Resources</h3>\n<ul>\n<li><a href=\"https://blog.carbonfive.com/2017/08/28/always-squash-and-rebase-your-git-commits/\">https://blog.carbonfive.com/2017/08/28/always-squash-and-rebase-your-git-commits/</a></li>\n<li><a href=\"https://github.com/todotxt/todo.txt-android/wiki/squash-all-commits-related-to-a-single-issue-into-a-single-commit\">https://github.com/todotxt/todo.txt-android/wiki/squash-all-commits-related-to-a-single-issue-into-a-single-commit</a></li>\n<li><a href=\"https://github.com/wprig/wprig/wiki/How-to-squash-commits\">https://github.com/wprig/wprig/wiki/How-to-squash-commits</a></li>\n</ul>\n<h2>How to set up Visual Studio Code as your git editor</h2>\n<p><a href=\"https://code.visualstudio.com/docs/editor/versioncontrol#_vs-code-as-git-editor\">https://code.visualstudio.com/docs/editor/versioncontrol#_vs-code-as-git-editor</a></p>","fields":{"slug":"/how-to-squash-commits/"},"frontmatter":{"author":"Dave Cohen","categories":["tech"],"date":"December 21, 2019","description":null,"tags":["Git"],"title":"How to Squash All Commits Related to a Single Issue into a Single Commit"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/how-to-squash-commits/","previous":{"fields":{"slug":"/about-songmind-studios/"},"frontmatter":{"title":"About Songmind Studios","type":"post"}},"next":{"fields":{"slug":"/2020-decade-in-review/"},"frontmatter":{"title":"2020 Resolutions and Reviewing the Decade","type":"post"}}}}}